[OpenAI 기반 RAG 챗봇 구현 실습 질의문]

프로젝트명 폴더명 :  OpenAI_RAG_Chatbot_Project

- 프로젝트 개요
data/ 폴더에 PDF 문서를 미리 넣어둔다.
PDF 문서를 로드하여 텍스트로 분할한다.
OpenAI Embedding 모델을 사용하여 벡터로 변환한다.
Faiss를 사용해 벡터 인덱스를 생성한다.
사용자의 질문이 들어오면 Faiss에서 관련 문서를 검색한다.
검색 결과를 기반으로 OpenAI LLM을 호출하여 답변한다.
랭체인을 사용하지 않고 최소 기능의 RAG 챗봇 예제를 구현한다.

-----------------------------------------------------------------------------
#1단계 : 프로젝트 구조 및 환경 설정
질의문:
OpenAI API를 RAG 챗봇 실습 프로젝트를 생성해줘.
LangChain사용하지 말고 OpenAI API를 직접 사용해줘

아직 소스는 만들지 말고 프로젝트 폴더 구조만 다음과 같이 구성해줘.

rag_chatbot_project/
 ├─ app.py                # 메인 실행 파일
 ├─ data/                  # PDF 문서 저장 폴더
 │   └─ sample.pdf
 ├─ vectorstore/          # Faiss 인덱스 저장 폴더
 ├─ requirements.txt
 └─ README.md

requirements.txt에는 다음 라이브러리를 포함해줘.
- faiss-cpu
- pypdf
- openai

OpenAI API Key는 .env 파일에 환경변수 OPENAI_API_KEY로 사용하도록 구성해줘.


# 2단계 : PDF 문서 로드 및 텍스트 분할
질의문:
data/ 폴더에 있는 모든 PDF 파일을 읽어서 문서를 로드하는 코드를 작성해줘.

조건은 다음과 같다.
- PyPDFLoader를 사용한다.
- 여러 PDF 파일을 모두 읽을 수 있어야 한다.
- 읽어온 문서를 분할한다.
- chunk_size는 1000
- chunk_overlap은 200

이 기능은 app.py에 함수 형태로 구현해줘.


#3단계 : OpenAI Embedding + Faiss 벡터 인덱스 생성
질의문:
분할된 문서를 OpenAI Embedding 모델을 사용해 벡터화하고
Faiss 벡터 인덱스를 생성하는 코드를 작성해줘.

조건은 다음과 같다.
- OpenAIEmbeddings를 사용한다.
- 인덱스를 생성한다.
- 생성된 인덱스를 vectorstore/ 폴더에 저장한다.
- 이미 인덱스가 존재하면 새로 생성하지 않고 로드한다.

이 기능을 함수로 구현해줘.

#4단계 : 사용자 질문 기반 문서 검색 (Retriever)
질의문 :
Faiss 벡터 인덱스를 기반으로
사용자의 질문과 가장 관련 있는 문서를 검색하는 기능을 구현해줘.

조건은 다음과 같다.
- 벡터 스토어에서 faiss 검색함수를 호출한다.
- 검색 결과 문서 개수는 k=3으로 설정한다.
- 검색된 문서를 리스트 형태로 반환한다.

이 기능을 함수로 만들어줘.

#5단계 : RAG 프롬프트 구성
질의문:
검색된 문서 내용을 기반으로 LLM에 전달할 RAG 프롬프트를 구성해줘.

조건은 다음과 같다.
- 문서 내용을 하나의 context 문자열로 합친다.
- 프롬프트에는 다음 내용을 포함한다.

"다음 문서를 참고하여 질문에 답변하라.
문서에 없는 내용은 추측하지 말고 '알 수 없음'이라고 답하라."

- 질문과 context를 명확히 구분해서 프롬프트를 만든다.

이 로직을 함수로 구현해줘.

#6단계 : OpenAI LLM 호출 및 답변 생성
질의문 :
RAG 프롬프트를 OpenAI LLM에 전달하여 최종 답변을 생성하는 코드를 작성해줘.

조건은 다음과 같다.
- model은 gpt-4o-mini 로 설정한다.
- LLM 호출 결과에서 텍스트 답변만 반환한다.

이 기능을  함수로 구현해줘.

#7단계 : 전체 흐름 통합 (RAG 챗봇 실행)
질의문 :
지금까지 만든 모든 함수를 app.py에서 하나로 연결해줘.

실행 흐름은 다음과 같다.
1. PDF 문서 로드 및 분할
2. Faiss 벡터 인덱스 생성 또는 로드
3. 사용자로부터 질문 입력 받기 (input 사용)
4. 질문과 관련된 문서 검색
5. RAG 프롬프트 생성
6. OpenAI LLM 호출
7. 최종 답변 출력

터미널에서 실행하면 질문을 입력하고 답변을 확인할 수 있는
콘솔 기반 RAG 챗봇으로 만들어줘.

#8단계 : 실습 확인용 질문 예시 문서 작성
질의문 :
이 프로젝트에 관한 
RAG 챗봇 동작 확인을 위해 README.md 문서를 만들어줘

다음과 같은 테스트 질문 예시도 추가해줘.

- "이 문서의 핵심 내용은 무엇인가?"
- "PDF에 언급된 주요 개념을 설명해줘"
- "이 문서에서 다루지 않은 내용은?"

초보자가 실습 흐름을 이해할 수 있도록 간단한 실행 방법도 문서에 함께 정리해줘.


#9단계 : Stremlit 기반 GUI 웹 챗봇 구현 (옵션)
질의문 :
이 소스의 기능을 그대로 Streamlit 기반으로 웹 챗봇으로 구현해줘
PDF파일을 분석해서 샘플 질문도 목록에서 복사해서 사용할 수 있도록 해줘

(추가 질의문)
RAG에 사용 된 PDF파일과 청크된 문서 목록을 목록으로 보여주고
질문후 답변 생성시 RAG에 사용된 문서의 출처를 보여주는 기능을 추가해줘

(기능이 구현 안될때  : 질문을 입력하면 먼저 RAG로 벡터 검색으로 얻어진 문서를 화면에 시켜주고
이것을 OpenAI 호출에 넘겨주고 답변을 출력하도록 수정해줘.)
-----------------------------------------------------------------------------------------------